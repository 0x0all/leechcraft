CMAKE_MINIMUM_REQUIRED (VERSION 2.8)
PROJECT (leechcraft_blogique_hestia)
INCLUDE (InitLCPlugin OPTIONAL)

INCLUDE (${QT_USE_FILE})

INCLUDE_DIRECTORIES (${CMAKE_CURRENT_BINARY_DIR}
	${CMAKE_CURRENT_SOURCE_DIR}
	${BLOGIQUE_INCLUDE_DIR}
	${LEECHCRAFT_INCLUDE_DIR}
	${LEECHCRAFT_INCLUDE_DIR}/blogique
	)

SET (HESTIA_SRCS
	accountstorage.cpp
	core.cpp
	hestia.cpp
	importaccountwidget.cpp
	localblogaccount.cpp
	localbloggingplatform.cpp
	)

SET (HESTIA_HEADERS
	accountstorage.h
	core.h
	hestia.h
	importaccountwidget.h
	localblogaccount.h
	localbloggingplatform.h
	)

SET (HESTIA_FORMS
	importaccountwidget.ui
 	)

# SET (HESTIA_RESOURCES blogiquehestiaresources.qrc)

# CreateTrVars ("blogique_metida" "de;en;es;fr;it;ru_RU;uk_UA" METIDA_TRANSLATIONS METIDA_COMPILED_TRANSLATIONS)

IF (NOT LC_NO_MOC)
	QT4_WRAP_CPP (HESTIA_MOC_SRCS ${HESTIA_HEADERS})
ENDIF (NOT LC_NO_MOC)
QT4_WRAP_UI (HESTIA_UIS_H ${HESTIA_FORMS})
QT4_ADD_RESOURCES (HESTIA_RCCS ${HESTIA_RESOURCES})

# ADD_CUSTOM_COMMAND (OUTPUT
# 	${METIDA_COMPILED_TRANSLATIONS}
# 	COMMAND "${QT_LRELEASE_EXECUTABLE}" ${METIDA_TRANSLATIONS}
# 	DEPENDS ${METIDA_TRANSLATIONS}
# 	WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
# 	)

ADD_LIBRARY (leechcraft_blogique_hestia SHARED
	${HESTIA_COMPILED_TRANSLATIONS}
	${HESTIA_SRCS}
	${HESTIA_MOC_SRCS}
	${HESTIA_UIS_H}
	${HESTIA_RCCS}
	)

TARGET_LINK_LIBRARIES (leechcraft_blogique_hestia
	${QT_LIBRARIES}
	${LEECHCRAFT_LIBRARIES}
	)

INSTALL (TARGETS leechcraft_blogique_hestia
		DESTINATION ${LC_PLUGINS_DEST})
INSTALL (FILES ${HESTIA_COMPILED_TRANSLATIONS}
		DESTINATION ${LC_TRANSLATIONS_DEST})
